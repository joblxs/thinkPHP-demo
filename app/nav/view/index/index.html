<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>导航</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/resource/layui/css/layui.css" rel="stylesheet">
    <link href="/resource/nav/css/style.css" rel="stylesheet">
</head>
<body>
<!--左侧栏-->
<div class="nav">
    <div class="nav-title">个人导航</div>
    <div class="nav-tree">
        <ul class="layui-nav layui-nav-tree">
            {volist name="cat" id="item" key="k"}
            <li class="layui-nav-item" lay-unselect>
                <a href="#categories{$item.id}">{$item.name}</a>
                {if isset($item.children)}
                <dl class="layui-nav-child">
                    {volist name="item.children" id="item1" key="k1"}
                    <dd lay-unselect><a href="javascript:;" data-filter="{$item1.pid}" data-tab="{$item1.id}">{$item1.name}</a></dd>
                    {/volist}
                </dl>
                {/if}
            </li>
            {/volist}
        </ul>
    </div>
</div>

<!--右侧主体-->
<div class="main">
    <div class="main-banner"></div>
    <div class="main-search"></div>
    <div class="main-site">
        {volist name="cat" id="item" key="k"}
        <div class="layui-tab layui-tab-brief" lay-filter="{$item.id}">
            <h4 id="categories{$item.id}">{$item.name}</h4>
            {if isset($item.children)}
            <ul class="layui-tab-title">
                {if isset($link[$item.id])}
                <li class="{if isset($link[$item.id])}layui-this{/if}" lay-id="{$item.id}">{$item.name}</li>
                {/if}
                {volist name="item.children" id="item1" key="k1"}
                <li class="{if $k1 == 1 && !isset($link[$item.id])}layui-this{/if}" lay-id="{$item1.id}">{$item1.name}</li>
                {/volist}
            </ul>
            <div class="layui-tab-content">
                {if isset($link[$item.id])}
                <div class="layui-tab-item {if isset($link[$item.id])}layui-show{/if}">
                    <div class="layui-bg-gray" style="padding: 16px;">
                        <div class="layui-row layui-col-space15">
                            {volist name="link[$item.id]" id="v" key="key"}
                            <div class="layui-col-xs6 layui-col-sm6 layui-col-md4 layui-col-lg3">
                                <a href="{$v.link}" lay-tips="{$v.desc}" class="tips">
                                    <div class="layui-card">
                                        <div class="layui-card-left">
                                            <img src="https://pic.lxshuai.top/i/2024/05/21/664ca61c1960e.webp" class="layui-card-img" />
                                        </div>
                                        <div class="layui-card-right">
                                            <div class="layui-card-header">{$v.name}</div>
                                            <div class="layui-card-body">
                                                {$v.desc}
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            {/volist}
                        </div>
                    </div>
                </div>
                {/if}
                {volist name="item.children" id="item1" key="k1"}
                {if isset($link[$item1.id])}
                <div class="layui-tab-item {if $k1 == 1}layui-show{/if}">
                    <div class="layui-bg-gray" style="padding: 16px;">
                        <div class="layui-row layui-col-space15">
                            {volist name="link[$item1.id]" id="v" key="key"}
                            <div class="layui-col-xs6 layui-col-sm6 layui-col-md4 layui-col-lg3">
                                <a href="{$v.link}" lay-tips="{$v.desc}" class="tips">
                                    <div class="layui-card">
                                        <div class="layui-card-left">
                                            <img src="https://pic.lxshuai.top/i/2024/05/21/664ca61c1960e.webp" class="layui-card-img" />
                                        </div>
                                        <div class="layui-card-right">
                                            <div class="layui-card-header">{$v.name}</div>
                                            <div class="layui-card-body">
                                                {$v.desc}
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            {/volist}
                        </div>
                    </div>
                </div>
                {else/}
                <div class="layui-tab-item">
                </div>
                {/if}
                {/volist}
            </div>
            {else/}
            {if isset($link[$item.id])}
            <div class="layui-tab-content">
                <div class="layui-tab-item layui-show">
                    <div class="layui-bg-gray" style="padding: 16px;">
                        <div class="layui-row layui-col-space15">
                            {volist name="link[$item.id]" id="v" key="key"}
                            <div class="layui-col-xs6 layui-col-sm6 layui-col-md4 layui-col-lg3">
                                <a href="{$v.link}" lay-tips="{$v.desc}" class="tips">
                                    <div class="layui-card">
                                        <div class="layui-card-left">
                                            <img src="https://pic.lxshuai.top/i/2024/05/21/664ca61c1960e.webp" class="layui-card-img" />
                                        </div>
                                        <div class="layui-card-right">
                                            <div class="layui-card-header">{$v.name}</div>
                                            <div class="layui-card-body">
                                                {$v.desc}
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            {/volist}
                        </div>
                    </div>
                </div>
            </div>
            {/if}
            {/if}
        </div>
        {/volist}
    </div>
    <div class="main-footer"></div>
</div>
<script src="/resource/layui/layui.js"></script>
<script>
    layui.use(function(){
        var element = layui.element;
        var $ = layui.$;
        element.render('nav');
        // 获取所有的导航项
        var navItems = document.querySelectorAll('.layui-nav-child dd');
        // 为每个导航项添加点击事件
        navItems.forEach(function(navItem, index){ 
            navItem.addEventListener('click', function(){
                var targetFilter = this.querySelector('a').getAttribute('data-filter');
                // 获取当前点击的导航项的data-tab属性值
                var targetTab = this.querySelector('a').getAttribute('data-tab');
                // 切换到对应的标签页
                element.tabChange(targetFilter, targetTab);
            });
        });

        // 给带有tips类的链接绑定鼠标悬浮提示事件
        $('.tips').on('mouseenter', function(){
            var tipsText = $(this).attr('lay-tips');
            // layer.tips(tipsText, this);
            layer.tips(tipsText, this, {
                tips: [3, '#16b777']
            });
        }).on('mouseleave', function(){
            layer.closeAll('tips');
        });
    });
</script>
</body>
</html>